import{a as lt,d as O,u as vt,o as Y,L as l,r as q,b as d,c as p,e,f as s,w as k,g as n,R as E,h as A,i as C,j as w,t as T,p as D,k as R,S as wt,F as _,l as _t,m as st,s as $,n as W,q as S,v as Z,x as U,y as G,z as Q,A as yt,B as kt,C as Tt,M as X,D as ct,E as mt,G as tt,H as et,I as pt,J as F,K as bt,N,O as at,P as zt,Q as Ct,T as qt,U as $t,V as Mt,W as jt,X as St,Y as Lt,Z as Bt,_ as Et,$ as Qt,a0 as It,a1 as At,a2 as Dt,a3 as Rt,a4 as Nt,a5 as Ot,a6 as Pt,a7 as Ut,a8 as Ft,a9 as Ht,aa as Vt,ab as Kt,ac as Yt,ad as Wt,ae as Jt,af as Zt,ag as Gt,ah as Xt,ai as te,aj as ee,ak as ae,al as oe,am as re,an as ie,ao as ne,ap as de}from"./vendor.770c8b46.js";const le=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const m of c.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function r(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerpolicy&&(c.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?c.credentials="include":i.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(i){if(i.ep)return;i.ep=!0;const c=r(i);fetch(i.href,c)}};le();const z=lt.create({baseURL:"/",headers:{Accept:"application/json","Content-Type":"application/json"}}),M=O("token",{state:()=>({token:vt("token",""),sound:!0}),getters:{refresh_token(){return this.token?Y(this.token).refresh_token:""},eid(){return this.token?Y(this.token).eid:""},id(){return this.token?Y(this.token).user_id:""},is_admin(){return this.token?Y(this.token).is_admin:!1}},actions:{async getToken(){l.info("token:get"),await z.get("/auth/token",{withCredentials:!0}).then(t=>{this.token=t.data.token}).catch(t=>{t.response&&t.response.status===401?(l.info("token:get login failed - redirecting to CAS"),window.location.href="/auth/login"):(l.error("token:get error"+t),this.token="")})},async tryToken(){l.info("token:try"),await z.get("/auth/token",{withCredentials:!0}).then(t=>{this.token=t.data.token}).catch(async t=>{t.response&&t.response.status===401?(l.info("token:try login failed - trying refresh token"),await this.refreshToken()):(l.error("token:try error"+t),this.token="")})},async refreshToken(){l.info("token:refresh"),await z.post("/auth/token",{refresh_token:this.refresh_token}).then(t=>{this.token=t.data.token}).catch(t=>{t.response&&t.response.status===401?(l.info("token:refresh login failed - redirecting to CAS"),window.location.href="/auth/login"):(l.error("token:refresh error"+t),this.token="")})},async logout(){this.token="",window.location.href=window.location.href="/auth/logout"},async toggleSound(){this.sound=!this.sound}}});var B=(t,a)=>{const r=t.__vccOpts||t;for(const[o,i]of a)r[o]=i;return r};const se=t=>(D("data-v-5f1a5e7f"),t=t(),R(),t),ce={class:"navbar navbar-expand-md navbar-dark fixed-top bg-purple"},me={class:"container"},pe=w("Office Hours"),be=se(()=>e("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarCollapse","aria-controls":"navbarCollapse","aria-expanded":"false","aria-label":"Toggle navigation"},[e("span",{class:"navbar-toggler-icon"})],-1)),ge={id:"navbarCollapse",class:"collapse navbar-collapse"},fe={class:"navbar-nav me-auto mb-2 mb-md-0"},ue={class:"nav-item"},he=w("Queues"),xe={class:"nav-item"},ve=w("About"),we={key:0,class:"nav-item"},_e=w("Admin"),ye={key:1,class:"nav-item"},ke=w("Data"),Te={class:""},ze={key:0},Ce={class:"navbar-nav me-auto mb-2 mb-md-0"},qe={class:"nav-item"},$e={class:"nav-item"},Me={class:"nav-item"},je=w(" Logout"),Se={key:1},Le=w(" Login"),Be={__name:"NavBar",setup(t){const a=M();return(r,o)=>{const i=q("font-awesome-icon");return d(),p("nav",ce,[e("div",me,[s(n(E),{to:"/",class:"navbar-brand"},{default:k(()=>[pe]),_:1}),be,e("div",ge,[e("ul",fe,[e("li",ue,[s(n(E),{to:"/queues","active-class":"active",class:"nav-link"},{default:k(()=>[he]),_:1})]),e("li",xe,[s(n(E),{to:"/about","active-class":"active",class:"nav-link"},{default:k(()=>[ve]),_:1})]),n(a).is_admin?(d(),p("li",we,[s(n(E),{to:"/admin","active-class":"active",class:"nav-link"},{default:k(()=>[_e]),_:1})])):A("",!0),n(a).is_admin?(d(),p("li",ye,[s(n(E),{to:"/data","active-class":"active",class:"nav-link"},{default:k(()=>[ke]),_:1})])):A("",!0)]),e("div",Te,[n(a).token?(d(),p("div",ze,[e("ul",Ce,[e("li",qe,[e("a",{class:"nav-link",onClick:o[0]||(o[0]=(...c)=>n(a).toggleSound&&n(a).toggleSound(...c))},[n(a).sound?(d(),C(i,{key:0,icon:"bell"})):(d(),C(i,{key:1,icon:"bell-slash"}))])]),e("li",$e,[s(n(E),{to:"/profile","active-class":"active",class:"nav-link"},{default:k(()=>[s(i,{icon:"user"}),w(" "+T(n(a).eid),1)]),_:1})]),e("li",Me,[e("a",{class:"btn btn-success float-end",onClick:o[1]||(o[1]=c=>n(a).logout())},[s(i,{icon:"arrow-right-from-bracket"}),je])])])])):(d(),p("div",Se,[e("a",{class:"btn btn-success",onClick:o[2]||(o[2]=c=>n(a).getToken())},[s(i,{icon:"arrow-right-to-bracket"}),Le])]))])])])])}}};var Ee=B(Be,[["__scopeId","data-v-5f1a5e7f"]]);const Qe={id:"main",class:"container px-4 py-5"},Ie={__name:"App",setup(t){return(a,r)=>(d(),p(_,null,[e("header",null,[s(Ee)]),e("div",Qe,[(d(),C(wt,null,{default:k(()=>[s(n(_t))]),_:1}))])],64))}};var Ae=B(Ie,[["__scopeId","data-v-68e3a569"]]);const De="modulepreload",dt={},Re="/",Ne=function(a,r){return!r||r.length===0?a():Promise.all(r.map(o=>{if(o=`${Re}${o}`,o in dt)return;dt[o]=!0;const i=o.endsWith(".css"),c=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${c}`))return;const m=document.createElement("link");if(m.rel=i?"stylesheet":De,i||(m.as="script",m.crossOrigin=""),m.href=o,document.head.appendChild(m),i)return new Promise((g,u)=>{m.addEventListener("load",g),m.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>a())};const Oe={},Pe=t=>(D("data-v-8c844e72"),t=t(),R(),t),Ue={class:"pb-2 border-bottom"},Fe=w(" Office Hours Queue "),He=Pe(()=>e("div",{class:"row p-4 pb-0 pt-lg-4 pb-lg-4 align-items-center rounded-3 border shadow-lg"},[e("div",{class:"col-lg-10 mx-auto"},[e("p",{class:"lead-custom text-center"}," Welcome! Here you can join the queue for office hours. Let's get started! ")])],-1));function Ve(t,a){const r=q("font-awesome-icon");return d(),p(_,null,[e("h2",Ue,[s(r,{icon:"chalkboard-teacher"}),Fe]),He],64)}var gt=B(Oe,[["render",Ve],["__scopeId","data-v-8c844e72"]]);const Ke=e("br",null,null,-1),Ye={key:0},We=w("Queues List"),Je={key:1},Ze=w(" Login"),Ge={__name:"LoginMessage",setup(t){const a=M();return(r,o)=>{const i=q("RouterLink"),c=q("font-awesome-icon");return d(),p("main",null,[s(gt),Ke,n(a).token?(d(),p("div",Ye,[s(i,{to:"/queues",class:"btn btn-success"},{default:k(()=>[We]),_:1})])):(d(),p("div",Je,[e("a",{class:"btn btn-success",onClick:o[0]||(o[0]=m=>n(a).getToken())},[s(c,{icon:"arrow-right-to-bracket"}),Ze])]))])}}},Xe={__name:"HomeView",setup(t){return(a,r)=>(d(),C(Ge))}},L=O("queues",{state:()=>({queues:[],online:[],socket:void 0,connected:!1,error:!1}),getters:{getQueue:t=>a=>t.queues.find(r=>r.id==a),getOnline:t=>a=>t.online.find(r=>r.id==a)||{is_open:!1,helpers:0,requests:0},sortedQueues:t=>[...t.queues].sort((a,r)=>r.is_open-a.is_open)},actions:{async hydrate(){l.info("queues:hydrate"),await z.get("/api/v1/queues").then(t=>{this.queues=t.data})},async hydrateOnline(){l.info("queues:hydrateOnline"),this.socket&&(this.socket.disconnect(),this.online={});const t=M(),a="/status";this.socket=st(a,{auth:{token:t.token}}),this.socket.on("connect",()=>{l.info("socket:connect"),this.connected=!0,this.error=!1}),this.socket.on("connect_error",r=>{l.error("socket:connect_error - "+r),this.$reset,this.error=!0}),this.socket.on("disconnect",()=>{l.info("socket:disconnect"),this.connected=!1,this.error=!1}),this.socket.on("status:update",async r=>{l.info("status:update - "+r.id),l.debug("|- updated: "+r);var o=this.online.findIndex(i=>i.id===r.id);o<0?this.online.push(r):Object.assign(this.online[o],r)}),l.info("emit status:connect"),await this.socket.emit("status:connect",async(r,o)=>{r==200?(l.info("status:connect OK"),l.debug("|- online: "+o),this.online=o):l.error("status:connect error - "+r)})},async disconnectQueue(){this.socket&&(l.info("emit socket:disconnect"),this.socket.disconnect()),this.$reset()},async update(t){await z.post("/api/v1/queues/"+t.id,{queue:t}).then(async()=>{await this.hydrate()})},async deleteQueue(t){await z.delete("/api/v1/queues/"+t).then(async()=>{await this.hydrate()})},async addQueue(t){await z.put("/api/v1/queues/",{name:t}).then(async()=>{await this.hydrate()})}}});const ta={class:"col"},ea={class:"card-header"},aa={key:0,class:"float-end badge rounded-pill bg-success"},oa={key:1,class:"float-end badge rounded-pill bg-danger"},ra={class:"card-body"},ia={class:"card-text"},na={__name:"QueueCard",props:{queue:{type:Object,default(){return{}}}},setup(t){const a=t,r=L(),{getOnline:o}=$(r),i=W();function c(m){i.push("/queues/"+m)}return(m,g)=>{const u=q("font-awesome-icon");return d(),p("div",ta,[e("div",{class:"card w-100 hvr-grow",onClick:g[0]||(g[0]=f=>c(a.queue.id))},[e("h5",ea,[w(T(a.queue.name)+" ",1),n(o)(a.queue.id).is_open===1?(d(),p("span",aa,[w("Open | "+T(n(o)(a.queue.id).helpers||0)+" ",1),s(u,{icon:"user-graduate"}),w(" | "+T(n(o)(a.queue.id).requests||0)+" ",1),s(u,{icon:"circle-question"})])):(d(),p("span",oa,"Closed"))]),e("div",ra,[e("p",ia,T(a.queue.snippet),1)])])])}}};var da=B(na,[["__scopeId","data-v-3228e55c"]]);const la={class:"row row-cols-1 row-cols-lg-3 g-4"},sa={__name:"QueueList",async setup(t){let a,r;const o=L();o.hydrate(),[a,r]=S(()=>o.hydrateOnline()),await a,r();const{sortedQueues:i}=$(o);return Z(async()=>{await o.disconnectQueue()}),(c,m)=>(d(),p("div",la,[(d(!0),p(_,null,U(n(i),(g,u)=>(d(),C(da,{key:g.id,queue:g,index:u},null,8,["queue","index"]))),128))]))}},ca=e("br",null,null,-1),ma={__name:"QueueListView",setup(t){return(a,r)=>(d(),p("main",null,[s(gt),ca,s(sa)]))}},K=O("requests",{state:()=>({requests:[],online:[],helpers:[],socket:void 0,connected:!1,error:!1}),getters:{getRequest:t=>a=>t.requests.find(r=>r.user_id===a),userOnline:t=>a=>t.online.find(r=>r==a)!==void 0,sortedRequests:t=>[...t.requests].sort(function(a,r){return a.status_id==r.status_id?a.id-r.id:r.status_id-a.status_id})},actions:{async connectQueue(t){this.socket&&this.socket.disconnect(),this.$reset();const a=M(),r="/";this.socket=st(r,{auth:{token:a.token,queue_id:t}}),this.socket.on("connect",()=>{l.info("socket:connect"),this.connected=!0,this.error=!1}),this.socket.on("connect_error",o=>{l.error("socket:connect_error - "+o),this.$reset,this.error=!0}),this.socket.on("disconnect",()=>{l.info("socket:disconnect"),this.connected=!1,this.error=!1}),this.socket.on("queue:update",async o=>{l.info("queue:update - "+o.id),l.debug("|- updated: "+o);var i=this.requests.findIndex(c=>c.id===o.id);i<0?(this.requests.push(o),a.sound&&new Audio("/ding-36029.mp3").play()):this.requests[i]=o}),this.socket.on("queue:remove",async o=>{l.info("queue.remove - "+o);var i=this.requests.findIndex(c=>c.id===o);i>=0&&this.requests.splice(i,1)}),this.socket.on("user:online",async o=>{l.info("user:online - "+o),this.online.push(String(o))}),this.socket.on("user:offline",async o=>{l.info("user:offline - "+o),this.online.splice(this.online.indexOf(String(o)),1)}),this.socket.on("helper:online",async o=>{l.info("helper:online - "+o.id),l.debug("|- helper: "+o),this.helpers.push(o)}),this.socket.on("helper:offline",async o=>{l.info("helper:offline - "+o),this.helpers.splice(this.helpers.findIndex(i=>i.id==o),1)}),this.socket.on("queue:opening",async()=>{l.info("queue:opening"),await L().hydrate()}),this.socket.on("connected",async(o,i)=>{l.info("socket:connected"),l.debug("|-online: "+o),l.debug("|-helpers: "+i),this.online=o,this.helpers=i}),this.socket.on("queue:closing",async()=>{l.info("queue:closing"),this.requests=[],await L().hydrate()}),l.info("emit queue:connect"),await this.socket.emit("queue:connect",async(o,i)=>{o==200?(l.info("queue:connect OK"),l.debug("|- requests: "+i),this.requests=i):l.error("queue:connect error - "+o)})},async disconnectQueue(){this.socket&&(l.info("emit socket:disconnect"),this.socket.disconnect()),this.$reset()},async joinQueue(){l.info("emit queue:join"),await this.socket.emit("queue:join",async t=>{t==200?l.info("queue:join OK"):l.error("queue:join error - "+t)})},async openQueue(){l.info("emit queue:open"),await this.socket.emit("queue:open",async t=>{t==200?(l.info("queue:open OK"),L().hydrate()):l.error("queue:open error - "+t)})},async closeQueue(){l.info("emit queue:close"),await this.socket.emit("queue:close",async t=>{t==200?(l.info("queue:close OK"),this.requests=[],L().hydrate()):l.error("queue:close error - "+t)})},async takeRequest(t){l.info("emit request:take - "+t),await this.socket.emit("request:take",t,async a=>{a==200?l.info("request:take OK"):l.error("request:take error - "+a)})},async deleteRequest(t){l.info("emit request:delete - "+t),await this.socket.emit("request:delete",t,async a=>{a==200?l.info("request:delete OK"):l.error("request:delete error - "+a)})},async finishRequest(t){l.info("emit request:finish - "+t),await this.socket.emit("request:finish",t,async a=>{a==200?l.info("request:finish OK"):l.error("request:finish error - "+a)})},async requeueRequest(t){l.info("emit request:requeue - "+t),await this.socket.emit("request:requeue",t,async a=>{a==200?l.info("request:requeue OK"):l.error("request:requeue error - "+a)})}}});const pa=t=>(D("data-v-651444a6"),t=t(),R(),t),ba={key:2,class:"badge bg-primary rounded-pill"},ga=pa(()=>e("br",null,null,-1)),fa={id:"tooltip",class:"text-muted"},ua={__name:"RequestItem",props:{request:{type:Object,default(){return{}}},helper:{type:Boolean,default(){return!1}},userId:{type:Number,default(){return-1}}},setup(t){const a=t;var r=G({now:Q.utc()});const o=function(){r.now=Q.utc(),setInterval(o,1e4)};setInterval(o,1e4);const i=K(),c=async function(){await i.deleteRequest(a.request.id)},m=async function(){await i.takeRequest(a.request.id)},g=async function(){await i.finishRequest(a.request.id)},u=async function(){await i.requeueRequest(a.request.id)},f=yt(()=>a.request.updated_at?r.now.to(a.request.updated_at):r.now.to(a.request.created_at));return(x,h)=>{const b=q("font-awesome-icon");return d(),p("li",{class:kt(["list-group-item",[t.request.status_id==2?"list-group-item-primary":"",t.request.user_id==t.userId?"current-user":"",n(i).userOnline(t.request.user_id)?"":"list-group-item-light"]])},[n(i).userOnline(t.request.user_id)?(d(),C(b,{key:0,icon:"link"})):(d(),C(b,{key:1,icon:"link-slash"})),w(" "+T(t.request.user.name)+" ",1),t.helper?(d(),p(_,{key:2},[e("button",{class:"float-end btn btn-danger btn-sm mx-1",onClick:c},[s(b,{icon:"times",size:"xl"})]),e("button",{class:"float-end btn btn-secondary btn-sm mx-1",onClick:u},[s(b,{icon:"redo",size:"lg"})]),t.request.status_id==1?(d(),p("button",{key:0,class:"float-end btn btn-primary btn-sm mx-1",onClick:m}," Take ")):(d(),p("button",{key:1,class:"float-end btn btn-success btn-sm mx-1",onClick:g}," Done ")),t.request.status_id==2?(d(),p("span",ba,T(t.request.helper.name),1)):A("",!0),ga,e("small",fa,T(n(f)),1)],64)):A("",!0)],2)}}};var ha=B(ua,[["__scopeId","data-v-651444a6"]]);const xa=e("h3",{class:"text-center"},"Students Waiting",-1),va=e("hr",null,null,-1),wa={class:"list-group list-group-numbered"},ft={__name:"RequestList",props:{id:{type:Number,default:-1}},setup(t){const a=M(),r=K(),{sortedRequests:o}=$(r);return(i,c)=>(d(),p(_,null,[xa,va,e("ul",wa,[(d(!0),p(_,null,U(n(o),(m,g)=>(d(),C(ha,Tt({key:m.id,request:m,index:g},i.$attrs,{"user-id":n(a).id}),null,16,["request","index","user-id"]))),128))])],64))}},_a=e("h3",{class:"text-center"},"Helpers Online",-1),ya=e("hr",null,null,-1),ka={class:"list-group list-group-flush"},ut={__name:"HelperList",setup(t){const a=K(),{helpers:r}=$(a);return(o,i)=>{const c=q("font-awesome-icon");return d(),p(_,null,[_a,ya,e("ul",ka,[(d(!0),p(_,null,U(n(r),(m,g)=>(d(),p("li",{key:g,class:"list-group-item"},[s(c,{icon:"link"}),w(" "+T(m.name),1)]))),128))])],64)}}};const H=t=>(D("data-v-38a96dbb"),t=t(),R(),t),Ta={class:"queue-header mx-auto"},za={key:0,class:"btn btn-outline-success float-end disabled"},Ca=H(()=>e("span",{class:"visually-hidden"},"Connected!",-1)),qa=H(()=>e("span",{class:"visually-hidden"},"Disconnected!",-1)),$a=H(()=>e("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),Ma=H(()=>e("span",{class:"visually-hidden"},"Connecting...",-1)),ja=[$a,Ma],Sa=H(()=>e("h2",{class:"text-center"},"Moderate Queue",-1)),La=H(()=>e("hr",null,null,-1)),Ba={class:"row"},Ea={class:"col-12 col-md-4 mb-4"},Qa={class:"col-12 col-md-8 mb-4"},Ia={__name:"HelperPane",props:{id:{type:Number,default:-1}},async setup(t){let a,r;const o=t,i=L();[a,r]=S(()=>i.hydrate()),await a,r();const c=i.getQueue,m=K(),{connected:g,error:u}=$(m);[a,r]=S(()=>m.connectQueue(o.id)),await a,r();const f=async function(){confirm("Are you sure? All pending requests will be lost!")&&await m.closeQueue()},x=async function(){await m.openQueue()},h=async function(){await m.connectQueue(o.id)};return Z(async()=>{await m.disconnectQueue()}),(b,v)=>{const y=q("font-awesome-icon");return d(),p(_,null,[e("div",Ta,[n(g)?(d(),p("button",za,[s(y,{icon:"link"}),Ca])):(d(),p(_,{key:1},[n(u)?(d(),p("button",{key:0,class:"btn btn-outline-danger float-end",onClick:h},[s(y,{icon:"link-slash"}),qa])):(d(),p("button",{key:1,class:"btn btn-outline-warning float-end",onClick:h},ja))],64)),Sa,n(c)(t.id).is_open==1?(d(),p("a",{key:2,class:"w-100 btn btn-success",onClick:f},"Queue is Open - Click to Close")):(d(),p("a",{key:3,class:"w-100 btn btn-danger",onClick:x},"Queue is Closed - Click to Open"))]),La,e("div",Ba,[e("div",Ea,[s(ut)]),e("div",Qa,[s(ft,{id:t.id,helper:""},null,8,["id"])])])],64)}}};var Aa=B(Ia,[["__scopeId","data-v-38a96dbb"]]);const I=t=>(D("data-v-3eaf00d9"),t=t(),R(),t),Da={id:"studentModal",class:"modal fade",tabindex:"-1","aria-labelledby":"studentModalLabel","aria-hidden":"true"},Ra={class:"modal-dialog"},Na={class:"modal-content"},Oa=I(()=>e("div",{class:"modal-header"},[e("h5",{id:"studentModalLabel",class:"modal-title"},"Your Turn!"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Pa={class:"modal-body"},Ua=w(" You will be helped by "),Fa=w(". Their contact info is below: "),Ha=I(()=>e("hr",null,null,-1)),Va=["innerHTML"],Ka=I(()=>e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," OK ")],-1)),Ya={class:"queue-header mx-auto"},Wa={key:0,class:"btn btn-outline-success float-end disabled"},Ja=I(()=>e("span",{class:"visually-hidden"},"Connected!",-1)),Za=I(()=>e("span",{class:"visually-hidden"},"Disconnected!",-1)),Ga=I(()=>e("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),Xa=I(()=>e("span",{class:"visually-hidden"},"Connecting...",-1)),to=[Ga,Xa],eo=I(()=>e("h2",{class:"text-center"},"Waiting Queue",-1)),ao={key:0,class:"w-100 btn btn-success disabled",disabled:""},oo={key:3,class:"w-100 btn btn-danger disabled",disabled:""},ro=I(()=>e("hr",null,null,-1)),io={key:0,class:"row"},no={class:"col-12 col-md-4 mb-4"},lo={class:"col-12 col-md-8 mb-4"},so={__name:"StudentPane",props:{id:{type:Number,default:-1}},async setup(t){let a,r;const o=t,i=M(),c=L();[a,r]=S(()=>c.hydrate()),await a,r();const m=c.getQueue,g=K(),u=g.getRequest,{connected:f,error:x}=$(g);[a,r]=S(()=>g.connectQueue(o.id)),await a,r();var h,b=!1;g.$subscribe(()=>{const j=u(i.id);j&&j.status_id==2&&!b&&(b=!0,h=new X("#studentModal",{}),h.show(),i.sound&&new Audio("/ding-36029.mp3").play()),j||(b=!1)});const v=async function(){b=!1,await g.joinQueue()},y=async function(){await g.connectQueue(o.id)};return Z(async()=>{await g.disconnectQueue()}),(j,it)=>{const nt=q("font-awesome-icon");return d(),p(_,null,[e("div",Da,[e("div",Ra,[e("div",Na,[Oa,e("div",Pa,[n(u)(n(i).id)&&n(u)(n(i).id).helper?(d(),p(_,{key:0},[e("p",null,[Ua,e("strong",null,T(n(u)(n(i).id).helper.name),1),Fa]),Ha,e("div",{innerHTML:n(ct).sanitize(n(mt).parse(n(u)(n(i).id).helper.contact_info||""))},null,8,Va)],64)):A("",!0)]),Ka])])]),e("div",Ya,[n(f)?(d(),p("button",Wa,[s(nt,{icon:"link"}),Ja])):(d(),p(_,{key:1},[n(x)?(d(),p("button",{key:0,class:"btn btn-outline-danger float-end",onClick:y},[s(nt,{icon:"link-slash"}),Za])):(d(),p("button",{key:1,class:"btn btn-outline-warning float-end",onClick:y},to))],64)),eo,n(m)(t.id).is_open==1?(d(),p(_,{key:2},[n(u)(n(i).id)!=null?(d(),p("a",ao,"Queue Joined")):(d(),p("a",{key:1,class:"w-100 btn btn-success",onClick:it[0]||(it[0]=Gr=>v())},"Join Queue"))],64)):(d(),p("a",oo,"Queue is Closed"))]),ro,n(m)(t.id).is_open==1?(d(),p("div",io,[e("div",no,[s(ut)]),e("div",lo,[s(ft,{id:t.id},null,8,["id"])])])):A("",!0)],64)}}};var co=B(so,[["__scopeId","data-v-3eaf00d9"]]);const mo=w(" Back"),po=w(" Edit"),bo={class:"display-5 text-center"},go=e("hr",null,null,-1),fo=["innerHTML"],uo=e("hr",null,null,-1),ho={__name:"QueueSingle",props:{id:{type:Number,default:-1}},async setup(t){let a,r;const o=M(),i=L();[a,r]=S(()=>i.hydrate()),await a,r();const c=i.getQueue;return(m,g)=>{const u=q("font-awesome-icon");return d(),p("main",null,[s(n(E),{to:{name:"queues"},class:"btn btn-secondary float-start"},{default:k(()=>[s(u,{icon:"arrow-left"}),mo]),_:1}),n(o).is_admin?(d(),C(n(E),{key:0,to:{name:"queue_edit",params:{id:t.id}},class:"btn btn-secondary float-end"},{default:k(()=>[s(u,{icon:"pen-to-square"}),po]),_:1},8,["to"])):A("",!0),e("h1",bo,T(n(c)(t.id).name),1),go,e("div",{innerHTML:n(ct).sanitize(n(mt).parse(n(c)(t.id).description))},null,8,fo),uo,n(c)(t.id).helper==1?(d(),C(Aa,{key:1,id:t.id},null,8,["id"])):(d(),C(co,{key:2,id:t.id},null,8,["id"]))])}}},xo={__name:"QueueSingleView",setup(t){return(a,r)=>(d(),C(ho))}},ot=O("users",{state:()=>({users:[]}),getters:{getUser:t=>a=>t.users.find(r=>r.id===a)},actions:{async hydrate(){l.info("users:hydrate"),await z.get("/api/v1/users").then(t=>{this.users=t.data})},async update(t){await z.post("/api/v1/users/"+t.id,{user:t}).then(async()=>{await this.hydrate()})},async deleteUser(t){await z.delete("/api/v1/users/"+t).then(async()=>{await this.hydrate()})},async addUser(t){await z.put("/api/v1/users/",{eid:t}).then(async()=>{await this.hydrate()})}}});const vo=e("h1",{class:"display-5 text-center"},"Edit Queue",-1),wo=e("hr",null,null,-1),_o={class:"mb-3"},yo=e("label",{for:"multiselect-users",class:"form-label"},"Helpers",-1),ko=e("div",{class:"form-text"}," Helpers who can manage the queue (usually TAs) - admins already have access ",-1),To={class:"row row-cols-1 row-cols-md-2"},zo=e("div",{class:"col d-grid mb-2"},[e("button",{class:"btn btn-success"},"Save")],-1),Co={class:"col d-grid mb-2"},qo=w(" Cancel"),$o={__name:"EditQueue",props:{id:{type:Number,default:-1}},async setup(t){let a,r;const o=t,i=W(),c=L();[a,r]=S(()=>c.hydrate()),await a,r();const m=c.getQueue(o.id),g=ot();g.hydrate();const{users:u}=$(g);var f;tt(()=>{f=new et({autoDownloadFontAwesome:!1,blockStyles:{italic:"_"},status:!1,spellChecker:!1})});const x=async h=>{h=(({id:b,name:v,snippet:y})=>({id:b,name:v,snippet:y}))(h),h.description=f.value(),h.users=[];for(const b of m.users)h.users.push({id:b.id});try{await c.update(h),i.push("/queues/"+m.id)}catch(b){if(b.response&&b.response.status===422){let v={};if(b.response.data.data){for(const y in b.response.data.data){v[y]="";for(const j of b.response.data.data[y])v[y]=v[y]+j.message+" "}F("queueform",["The server rejected this submission. Please correct errors listed above"],v)}else F("queueform",["The server rejected this submission due to an SQL Error. Refresh and try again"])}else console.error(b)}};return(h,b)=>{const v=q("FormKit"),y=q("router-link");return d(),p("main",null,[vo,wo,s(v,{id:"queueform",type:"form",value:n(m),actions:!1,onSubmit:x},{default:k(()=>[s(v,{type:"text",name:"name",label:"Queue Name",help:"Name of the queue (usually the course)",validation:"required"}),s(v,{type:"text",name:"snippet",label:"Short Description",help:"Short description shown on the initial card"}),s(v,{type:"textarea",name:"description",label:"Long Description",help:"Long description shown on the queue page",rows:"10"}),e("div",_o,[yo,s(n(pt),{id:"multiselect-users",modelValue:n(m).users,"onUpdate:modelValue":b[0]||(b[0]=j=>n(m).users=j),class:"form-control",options:n(u),multiple:!0,"tag-placeholder":"Add this as new user",placeholder:"Type to search or add user",label:"eid","track-by":"id"},null,8,["modelValue","options"]),ko]),e("div",To,[zo,e("div",Co,[s(y,{to:{name:"queue_single",params:{id:n(m).id}},class:"btn btn-secondary"},{default:k(()=>[qo]),_:1},8,["to"])])])]),_:1},8,["value"])])}}},Mo={__name:"QueueEditView",setup(t){return(a,r)=>(d(),C($o))}},jo=O("profile",{state:()=>({user:{}}),actions:{async hydrate(){l.info("profile:hydrate"),await z.get("/api/v1/profile").then(t=>{this.user=t.data})},async update(t){await z.post("/api/v1/profile/",{user:t}).then(async()=>{await this.hydrate()})}}});const So=e("h1",{class:"display-5 text-center"},"Edit User",-1),Lo=e("hr",null,null,-1),Bo={class:"row row-cols-1 row-cols-md-2"},Eo=e("div",{class:"col d-grid mb-2"},[e("button",{class:"btn btn-success"},"Save")],-1),Qo={class:"col d-grid mb-2"},Io=w(" Cancel"),Ao={__name:"EditProfile",async setup(t){let a,r;const o=W(),i=jo();[a,r]=S(()=>i.hydrate()),await a,r();const{user:c}=$(i);var m;tt(()=>{m=new et({autoDownloadFontAwesome:!1,blockStyles:{italic:"_"},status:!1,spellChecker:!1})});const g=async u=>{const f={name:u.name,contact_info:m.value()};try{await i.update(f),o.push("/queues/")}catch(x){if(x.response&&x.response.status===422){let h={};if(x.response.data.data){for(const b in x.response.data.data){h[b]="";for(const v of x.response.data.data[b])h[b]=h[b]+v.message+" "}F("userform",["The server rejected this submission. Please correct errors listed above"],h)}else F("userform",["The server rejected this submission due to an SQL Error. Refresh and try again"])}else console.error(x)}};return(u,f)=>{const x=q("FormKit"),h=q("router-link");return d(),p("main",null,[So,Lo,s(x,{id:"userform",type:"form",value:n(c),actions:!1,onSubmit:g},{default:k(()=>[s(x,{type:"text",name:"eid",label:"eID",disabled:!0,help:"Your K-State eID (cannot be changed)",validation:"required"}),s(x,{type:"text",name:"name",label:"Name",help:"Your full name as you'd like it displayed on the site",validation:"required"}),s(x,{type:"textarea",name:"contact_info",label:"Contact Information",help:"Any information we should know about how to contact you",rows:"10"}),e("div",Bo,[Eo,e("div",Qo,[s(h,{to:{name:"queues"},class:"btn btn-secondary"},{default:k(()=>[Io]),_:1})])])]),_:1},8,["value"])])}}};const Do={__name:"ProfileView",setup(t){return(a,r)=>(d(),C(Ao))}},Ro={id:"userModal",class:"modal fade",tabindex:"-1","aria-labelledby":"userModalLabel","aria-hidden":"true"},No={class:"modal-dialog"},Oo={class:"modal-content"},Po=e("div",{class:"modal-header"},[e("h5",{id:"userModalLabel",class:"modal-title"},"Delete User"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Uo={class:"modal-body"},Fo=e("h5",null,"Are you sure you want to delete this user?",-1),Ho=e("strong",null,"eID: ",-1),Vo=e("br",null,null,-1),Ko=e("strong",null,"Name: ",-1),Yo={class:"modal-footer"},Wo=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Jo=w(" Delete User "),Zo=w(" User "),Go=e("h1",{class:"text-center"},"Users",-1),Xo={class:"table table-striped table-hover"},tr=e("thead",null,[e("tr",null,[e("th",null,"eID"),e("th",null,"Name"),e("th",null,"Roles"),e("th",null,"Actions")])],-1),er=["onClick"],ar={__name:"UserAdmin",setup(t){const a=ot();a.hydrate();const{users:r}=$(a),o=M();var i=G({}),c;const m=function(f){i.id=f.id,i.eid=f.eid,i.name=f.name,c=new X("#userModal",{}),c.show()},g=async function(f){await a.deleteUser(f),c.hide()},u=async function(){var f=prompt("Enter an eID to create a user");if(f)try{await a.addUser(f)}catch(x){x.response&&x.response.status===422?alert(JSON.stringify(x.response.data)):alert(x)}};return(f,x)=>{const h=q("font-awesome-icon");return d(),p(_,null,[e("div",Ro,[e("div",No,[e("div",Oo,[Po,e("div",Uo,[Fo,e("p",null,[Ho,w(T(n(i).eid)+" ",1),Vo,Ko,w(T(n(i).name),1)])]),e("div",Yo,[Wo,e("button",{type:"button",class:"btn btn-danger",onClick:x[0]||(x[0]=b=>g(n(i).id))},[s(h,{icon:"trash"}),Jo])])])])]),e("button",{type:"button",class:"btn btn-success float-end",onClick:u},[s(h,{icon:"plus"}),Zo]),Go,e("table",Xo,[tr,e("tbody",null,[(d(!0),p(_,null,U(n(r),b=>(d(),p("tr",{key:b.id},[e("td",null,T(b.eid),1),e("td",null,T(b.name),1),e("td",null,[(d(!0),p(_,null,U(b.roles,v=>(d(),p("span",{key:v.id,class:"badge rounded-pill bg-success"},T(v.name),1))),128))]),e("td",null,[s(n(E),{to:{name:"admin_useredit",params:{id:b.id}},class:"btn btn-secondary btn-sm mx-1"},{default:k(()=>[s(h,{icon:"pen-to-square"})]),_:2},1032,["to"]),b.id!=n(o).id?(d(),p("button",{key:0,type:"button",class:"btn btn-danger btn-sm mx-1",onClick:bt(v=>m(b),["prevent"])},[s(h,{icon:"trash"})],8,er)):A("",!0)])]))),128))])])],64)}}},or={id:"queueModal",class:"modal fade",tabindex:"-1","aria-labelledby":"queueModalLabel","aria-hidden":"true"},rr={class:"modal-dialog"},ir={class:"modal-content"},nr=e("div",{class:"modal-header"},[e("h5",{id:"queueModalLabel",class:"modal-title"},"Delete Queue"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),dr={class:"modal-body"},lr=e("h5",null,"Are you sure you want to delete this queue?",-1),sr=e("strong",null,"Name: ",-1),cr={class:"modal-footer"},mr=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),pr=w(" Delete Queue "),br=w(" Queue "),gr=e("h1",{class:"text-center"},"Queues",-1),fr={class:"table table-striped table-hover"},ur=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Actions")])],-1),hr=["onClick"],xr={__name:"QueueAdmin",setup(t){const a=L();a.hydrate();const{queues:r}=$(a);var o=G({}),i;const c=function(u){o.id=u.id,o.name=u.name,i=new X("#queueModal",{}),i.show()},m=async function(u){await a.deleteQueue(u),i.hide()},g=async function(){var u=prompt("Enter a name for the new queue");if(u)try{await a.addQueue(u)}catch(f){f.response&&f.response.status===422?alert(JSON.stringify(f.response.data)):alert(f)}};return(u,f)=>{const x=q("font-awesome-icon");return d(),p(_,null,[e("div",or,[e("div",rr,[e("div",ir,[nr,e("div",dr,[lr,e("p",null,[sr,w(T(n(o).name),1)])]),e("div",cr,[mr,e("button",{type:"button",class:"btn btn-danger",onClick:f[0]||(f[0]=h=>m(n(o).id))},[s(x,{icon:"trash"}),pr])])])])]),e("button",{type:"button",class:"btn btn-success float-end",onClick:g},[s(x,{icon:"plus"}),br]),gr,e("table",fr,[ur,e("tbody",null,[(d(!0),p(_,null,U(n(r),h=>(d(),p("tr",{key:h.id},[e("td",null,T(h.name),1),e("td",null,[e("button",{type:"button",class:"btn btn-danger btn-sm mx-1",onClick:bt(b=>c(h),["prevent"])},[s(x,{icon:"trash"})],8,hr)])]))),128))])])],64)}}},vr={__name:"AdminView",setup(t){return(a,r)=>(d(),p(_,null,[s(xr),s(ar)],64))}},wr=O("roles",{state:()=>({roles:[]}),actions:{async hydrate(){l.info("roles:hydrate"),await z.get("/api/v1/roles").then(t=>{this.roles=t.data})}}});const _r=e("h1",{class:"display-5 text-center"},"Edit User",-1),yr=e("hr",null,null,-1),kr={class:"mb-3"},Tr=e("label",{for:"multiselect-roles",class:"form-label"},"Roles",-1),zr=e("div",{class:"form-text"},"Roles assigned to this user",-1),Cr={class:"row row-cols-1 row-cols-md-2"},qr=e("div",{class:"col d-grid mb-2"},[e("button",{class:"btn btn-success"},"Save")],-1),$r={class:"col d-grid mb-2"},Mr=w(" Cancel"),jr={__name:"UserEdit",props:{id:{type:Number,default:-1}},async setup(t){let a,r;const o=t,i=W(),c=ot();[a,r]=S(()=>c.hydrate()),await a,r();const m=c.users.find(h=>h.id===parseInt(o.id)),g=wr();g.hydrate();const{roles:u}=$(g);var f;tt(()=>{f=new et({autoDownloadFontAwesome:!1,blockStyles:{italic:"_"},status:!1,spellChecker:!1})});const x=async h=>{h=(({id:b,name:v})=>({id:b,name:v}))(h),h.contact_info=f.value(),h.roles=[];for(const b of m.roles)h.roles.push({id:b.id});try{await c.update(h),i.push("/admin/")}catch(b){if(b.response&&b.response.status===422){let v={};if(b.response.data.data){for(const y in b.response.data.data){v[y]="";for(const j of b.response.data.data[y])v[y]=v[y]+j.message+" "}F("usersForm",["The server rejected this submission. Please correct errors listed above"],v)}else F("usersForm",["The server rejected this submission due to an SQL Error. Refresh and try again"])}else console.error(b)}};return(h,b)=>{const v=q("FormKit"),y=q("router-link");return d(),p("main",null,[_r,yr,s(v,{id:"userform",type:"form",value:n(m),actions:!1,onSubmit:x},{default:k(()=>[s(v,{type:"text",name:"eid",label:"eID",disabled:!0,help:"The user's K-State eID (cannot be changed)",validation:"required"}),s(v,{type:"text",name:"name",label:"Name",help:"The user's full name as you'd like it displayed on the site",validation:"required"}),s(v,{type:"textarea",name:"contact_info",label:"Contact Information",help:"Any information we should know about how to contact the user",rows:"10"}),e("div",kr,[Tr,s(n(pt),{id:"multiselect-roles",modelValue:n(m).roles,"onUpdate:modelValue":b[0]||(b[0]=j=>n(m).roles=j),class:"form-control",options:n(u),multiple:!0,"tag-placeholder":"Add this as new role",placeholder:"Type to search or add role",label:"name","track-by":"id"},null,8,["modelValue","options"]),zr]),e("div",Cr,[qr,e("div",$r,[s(y,{to:{name:"admin"},class:"btn btn-secondary"},{default:k(()=>[Mr]),_:1})])])]),_:1},8,["value"])])}}},Sr={__name:"UserEditView",setup(t){return(a,r)=>(d(),C(jr))}},rt=O("periods",{state:()=>({queues:[],periods:[],events:[],presences:[]}),actions:{async hydrate(){l.info("periods:hydrate"),await z.get("/api/v1/periods").then(t=>{this.queues=t.data})},async loadPeriods(t){l.info("periods:hydrate - "+t),await z.get("/api/v1/periods?name="+t).then(a=>{this.periods=a.data})},async loadEvents(t){l.info("periods:hydrate - "+t),await z.get("/api/v1/periods/"+t).then(a=>{this.events=a.data.events,this.presences=a.data.presences})}}});const ht=t=>(D("data-v-cae06284"),t=t(),R(),t),Lr=ht(()=>e("h1",{class:"display-5 text-center"},"Event Log: Queues",-1)),Br=ht(()=>e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"# Periods"),e("th",null,"Recent"),e("th",null,"Actions")])],-1)),Er={__name:"QueueList",async setup(t){let a,r;N.use(at);const o=rt();[a,r]=S(()=>o.hydrate()),await a,r();const{queues:i}=$(o),c=[{data:"queue_name"},{data:"periods"},{data:"recent",render:function(m){return Q(m).format("L")}},{data:"queue_name",render:function(m){return'<a class="btn btn-success" href="/data/'+encodeURIComponent(m)+'">View</a>'}}];return(m,g)=>(d(),p(_,null,[Lr,s(n(N),{columns:c,data:n(i),options:{paging:!1,searching:!1,info:!1},class:"table table-hover table-striped",width:"100%"},{default:k(()=>[Br]),_:1},8,["data"])],64))}};var Qr=B(Er,[["__scopeId","data-v-cae06284"]]);const Ir={__name:"DashboardView",setup(t){return(a,r)=>(d(),C(Qr))}};const Ar=t=>(D("data-v-21a42030"),t=t(),R(),t),Dr={class:"display-5 text-center"},Rr=Ar(()=>e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Opened"),e("th",null,"Closed"),e("th",null,"# Events"),e("th",null,"Actions")])],-1)),Nr={__name:"PeriodList",props:{name:{type:String,default:""}},async setup(t){let a,r;const o=t;N.use(at);const i=rt();[a,r]=S(()=>i.loadPeriods(o.name)),await a,r();const{periods:c}=$(i),m=[{data:"id"},{data:"created_at",render:function(g){return Q(g).format("L LTS")}},{data:"updated_at",render:function(g){return Q(g).format("L LTS")}},{data:"events"},{data:"id",render:function(g){return'<a class="btn btn-success" href="/period/'+g+'">View</a>'}}];return(g,u)=>(d(),p(_,null,[e("h1",Dr,"Event Log: "+T(t.name),1),s(n(N),{columns:m,data:n(c),class:"table table-hover table-striped",width:"100%"},{default:k(()=>[Rr]),_:1},8,["data"])],64))}};var Or=B(Nr,[["__scopeId","data-v-21a42030"]]);const Pr={__name:"PeriodView",setup(t){return(a,r)=>(d(),C(Or))}};const J=t=>(D("data-v-043c8b24"),t=t(),R(),t),Ur={class:"display-5 text-center"},Fr=J(()=>e("h2",{class:"text-center"},"Events",-1)),Hr=J(()=>e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"eID"),e("th",null,"Status"),e("th",null,"Start"),e("th",null,"End")])],-1)),Vr=J(()=>e("h2",{class:"text-center"},"Presences",-1)),Kr=J(()=>e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"eID"),e("th",null,"Start"),e("th",null,"End")])],-1)),Yr={__name:"EventList",props:{id:{type:Number,default:-1}},async setup(t){let a,r;const o=t;N.use(at);const i=rt();[a,r]=S(()=>i.loadEvents(o.id)),await a,r();const{events:c,presences:m}=$(i),g=[{data:"id"},{data:"eid"},{data:"status"},{data:"created_at",render:function(f){return Q(f).format("L LTS")}},{data:"updated_at",render:function(f){return Q(f).format("L LTS")}}],u=[{data:"id"},{data:"eid"},{data:"created_at",render:function(f){return Q(f).format("L LTS")}},{data:"updated_at",render:function(f){return Q(f).format("L LTS")}}];return(f,x)=>(d(),p(_,null,[e("h1",Ur,"Event Log: Period "+T(t.id),1),Fr,s(n(N),{columns:g,data:n(c),options:{paging:!1,searching:!1,info:!1},class:"table table-hover table-striped",width:"100%"},{default:k(()=>[Hr]),_:1},8,["data"]),Vr,s(n(N),{columns:u,data:n(m),options:{paging:!1,searching:!1,info:!1},class:"table table-hover table-striped",width:"100%"},{default:k(()=>[Kr]),_:1},8,["data"])],64))}};var Wr=B(Yr,[["__scopeId","data-v-043c8b24"]]);const Jr={__name:"EventView",setup(t){return(a,r)=>(d(),C(Wr))}},P=()=>M().is_admin,xt=zt({history:Ct("/"),routes:[{path:"/",name:"home",component:Xe,beforeEnter:async()=>{const t=M();if(await t.tryToken(),t.token)return"/queues"}},{path:"/about",name:"about",component:()=>Ne(()=>import("./AboutView.4a8278b4.js"),["assets/AboutView.4a8278b4.js","assets/vendor.770c8b46.js"])},{path:"/queues",name:"queues",component:ma},{path:"/queues/:id",name:"queue_single",component:xo,props:t=>({id:Number(t.params.id)})},{path:"/queues/:id/edit",name:"queue_edit",component:Mo,props:!0,beforeEnter:P},{path:"/profile",name:"profile",component:Do},{path:"/admin",name:"admin",component:vr,beforeEnter:P},{path:"/admin/user/:id/edit",name:"admin_useredit",component:Sr,props:!0,beforeEnter:P},{path:"/data",name:"data",component:Ir,beforeEnter:P},{path:"/data/:name",name:"data_periods",component:Pr,beforeEnter:P,props:t=>({name:t.params.name})},{path:"/period/:id",name:"period",component:Jr,beforeEnter:P,props:t=>({id:t.params.id})}]});xt.beforeEach(async function(t){if(t.name!=="home"&&t.name!=="about"){const a=M();if(a.token||await a.tryToken(),!a.token)return"/"}});const Zr=()=>{z.interceptors.request.use(t=>{if(t.url!=="/auth/token"){const a=M();a.token&&(t.headers.Authorization="Bearer "+a.token)}return t},t=>Promise.reject(t)),z.interceptors.response.use(t=>t,async t=>{const a=t.config;if(a.url!=="/auth/token"&&t.response&&t.response.status===401&&!a._retry){a._retry=!0;try{return await M().refreshToken(),z(a)}catch(r){return Promise.reject(r)}}return Promise.reject(t)})};l.useDefaults();l.setLevel(l.WARN);qt.add($t,Mt,jt,St,Lt,Bt,Et,Qt,It,At,Dt,Rt,Nt,Ot,Pt,Ut,Ft,Ht,Vt,Kt,Yt,Wt,Jt,Zt,Gt,Xt,te);ee.watch();Zr();const V=ae(Ae);V.use(oe());V.use(xt);V.use(re,lt);V.use(ie,ne({config:{classes:{input:"form-control",label:"form-label",help:"form-text",outer:"mb-3"}}}));V.component("FontAwesomeIcon",de);V.mount("#app");export{B as _};
